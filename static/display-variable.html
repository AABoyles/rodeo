<!DOCTYPE html>
<html lang="en">
<head>
    <title>Rodeo</title>
    <link href="css/styles.css" rel="stylesheet">
    <script type="text/javascript">
      window.$ = window.jQuery = require('jquery');
    </script>
</head>
<body>
  <!-- header -->
  <table id="header" class="table table-bordered hide" style="margin-bottom: 0px;">
  </table>

  <!-- rows -->
  <div style="max-height: 900px; overflow: auto;">
    <table id="rows" class="table table-bordered hide">
    </table>
  </div>
  <pre class="hide" id="data"></pre>


<script type="text/javascript">
$(document).ready(function() {
  require('ipc').on('ping', function(data) {
    if (data.type=="DataFrame" || data.type=="Series") {
      $("#data").addClass("hide");
      $("#data").text();

      $("#header").removeClass("hide");
      $("#rows").removeClass("hide");

      var header = $("thead", data.html);
      $("#header").append(header);
      var rows = $("tbody", data.html);
      $("#rows").append(rows);
      // configure column widths
      // TODO: this doesn't appear to be working when the header widths are bigger
      // than the row widths
      $("#rows").width($("#header").width());
      $("#rows tr").first().children().each(function(i, el) {
        var rowWidth = $(el).outerWidth();
        var headerWidth = $($("#header th")[i]).outerWidth();
        var width = Math.max(rowWidth, headerWidth);
        $($("#header th")[i]).outerWidth(width);
      });
    } else {
      $("#data").removeClass("hide");
      $("#data").text(data.html);

      $("#header").addClass("hide");
      $("#rows").addClass("hide");
    }
  });
});
</script>

</body>
</html>
