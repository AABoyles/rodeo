machine:
  environment:
    XCODE_WORKSPACE: "platforms/ios"
    XCODE_PROJECT: "YourProject.xcodeproj"
    XCODE_SCHEME: "test"
  timezone:
    America/New_York
dependencies:
  cache_directories:
    - "~/.nvm"
    - "~/.pyenv"
    - "node_modules"
    - "app/node_modules"
  override:
    - ./scripts/osx/install-deps.sh
test:
  override:
    - npm test
deployment:
  master:
    tag: /v[0-9]+(\.[0-9]+)*/
    commands:
      - npm run dist
      - cp -Rp dist/Rodeo-linux-x64/* $CIRCLE_ARTIFACTS
  stable:
    branch: stable
    commands:
      - npm run dist:stable
      - cp -Rp dist/Rodeo-linux-x64/* $CIRCLE_ARTIFACTS
  outlaw:
    branch: outlaw
    commands:
      - npm run dist:outlaw
      - cp -Rp dist/Rodeo-linux-x64/* $CIRCLE_ARTIFACTS
  build-test:
    branch: builder
    commands:
      - ./scripts/osx/install-dist-deps.sh
      - npm run dist:osx
      - cp -Rp dist/Rodeo-linux-x64/* $CIRCLE_ARTIFACTS
