machine:
  timezone:
    America/New_York
  node:
    version: 5.0
  python:
    version: 2.7.10
dependencies:
  cache_directories:
    - "app/node_modules"
  pre:
    - pip install -q --upgrade setuptools pip
    - pip install -q jupyter
    - pip install -q numpy matplotlib plotly toyplot ipywidgets==4.1.1 pandas
    - jupyter nbextension enable --sys-prefix --py widgetsnbextension
    - sudo apt-get install icnsutils graphicsmagick xz-utils
deployment:
  stable:
    tag: /v[0-9]+(\.[0-9]+)*/
    commands:
      - gulp dist:linux
      - mkdir $CIRCLE_ARTIFACTS/Rodeo-linux-x64
      - mv dist/Rodeo-linux-x64/* $CIRCLE_ARTIFACTS/Rodeo-linux-x64/
  outlaw:
    tag: /nightly-.*/
    commands:
      - gulp dist:linux
      - mkdir $CIRCLE_ARTIFACTS/Rodeo-linux-x64
      - mv dist/Rodeo-linux-x64/* $CIRCLE_ARTIFACTS/Rodeo-linux-x64/
  build-test:
    branch: build
    commands:
      - gulp dist:linux
      - mkdir $CIRCLE_ARTIFACTS/Rodeo-linux-x64
      - mv dist/Rodeo-linux-x64/* $CIRCLE_ARTIFACTS/Rodeo-linux-x64/
