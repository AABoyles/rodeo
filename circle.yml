machine:
  environment:
    XCODE_WORKSPACE: "platforms/ios"
    XCODE_PROJECT: "YourProject.xcodeproj"
    XCODE_SCHEME: "test"
  timezone:
    America/New_York
dependencies:
  cache_directories:
    - "app/node_modules"
  override:
    - ./scripts/osx/install-deps.sh
test:
  override:
    - npm test
deployment:
  stable:
    tag: /v[0-9]+(\.[0-9]+)*/
    commands:
      - npm run dist
      - cp -Rp dist/Rodeo-linux-x64/* $CIRCLE_ARTIFACTS
  outlaw:
    tag: /nightly-.*/
    commands:
      - npm run dist
      - cp -Rp dist/Rodeo-linux-x64/* $CIRCLE_ARTIFACTS
  build-test:
    branch: build-all
    commands:
      - npm run dist
      - cp -Rp dist/Rodeo-linux-x64/* $CIRCLE_ARTIFACTS
